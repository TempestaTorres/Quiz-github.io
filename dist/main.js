/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/app.js":
/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _router_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./router.js */ \"./src/router.js\");\n\n(function () {\n  const newRouter = new _router_js__WEBPACK_IMPORTED_MODULE_0__.Router();\n  window.addEventListener('DOMContentLoaded', routerHandler);\n  window.addEventListener('popstate', routerHandler);\n  function routerHandler() {\n    \"use strict\";\n\n    newRouter.openRoute();\n  }\n})();\n\n//# sourceURL=webpack://itlogia-project-quiz/./src/app.js?\n}");

/***/ }),

/***/ "./src/modules/quizresult.js":
/*!***********************************!*\
  !*** ./src/modules/quizresult.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QuizResult: () => (/* binding */ QuizResult)\n/* harmony export */ });\nclass QuizResult {\n  constructor() {\n    this.data = [];\n    let storageItem = sessionStorage.getItem(\"madJunUser\");\n    if (storageItem) {\n      this.data = JSON.parse(storageItem);\n      this.scoreEl = document.querySelector(\".user-answers-number\");\n      this.scoreEl.textContent = `${this.data.score}/${this.data.total}`;\n      document.querySelector(\".back-to-selection\").addEventListener(\"click\", this.#backToSelection.bind(this));\n      document.querySelector(\".view-answers\").addEventListener(\"click\", this.#viewAnswers.bind(this));\n    } else {\n      location.href = \"#/\";\n    }\n  }\n  #backToSelection(e) {\n    e.preventDefault();\n    sessionStorage.removeItem(\"madJunUser\");\n    location.href = \"#/select\";\n  }\n  #viewAnswers(e) {\n    e.preventDefault();\n    //location.href = \"#/view?score=\" + this.score + \"&total=\" + this.total + \"&id=\" + this.id;\n    location.href = \"#/view\";\n  }\n}\n\n//# sourceURL=webpack://itlogia-project-quiz/./src/modules/quizresult.js?\n}");

/***/ }),

/***/ "./src/modules/quiztest.js":
/*!*********************************!*\
  !*** ./src/modules/quiztest.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QuizTest: () => (/* binding */ QuizTest)\n/* harmony export */ });\n/* harmony import */ var _scripts_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../scripts/utils.js */ \"./src/scripts/utils.js\");\n/* harmony import */ var _scripts_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scripts/config.js */ \"./src/scripts/config.js\");\n/* harmony import */ var _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scripts/auth.js */ \"./src/scripts/auth.js\");\n/* harmony import */ var _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../scripts/validation.utils.js */ \"./src/scripts/validation.utils.js\");\n\n\n\n\nclass QuizTest {\n  constructor() {\n    this.refreshRequestUrl = _scripts_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + \"/refresh\";\n    this.accessToken = _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.getAccessToken();\n    this.refreshToken = _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.getRefreshToken();\n    this.header = {\n      name: \"x-access-token\",\n      value: this.accessToken\n    };\n    this.refBody = {\n      refreshToken: this.refreshToken\n    };\n    this.errMessage = \"Oops, something went wrong!\";\n    this.test = null;\n    this.userResult = [];\n    let params = (0,_scripts_utils_js__WEBPACK_IMPORTED_MODULE_0__.queryUrlparams)();\n    this.testId = params.id;\n    if (isNaN(this.testId)) {\n      location.href = \"#/\";\n    } else {\n      this.requestUrl = _scripts_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + \"/tests/\" + params.id;\n      this.resultRequestUrl = _scripts_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + \"/tests/\" + params.id + \"/pass\";\n      this.timer = {\n        timerId: 0,\n        seconds: 60\n      };\n      this.timerCounter = document.querySelector(\".timer-counter\");\n      this.#init();\n    }\n  }\n  async #init() {\n    try {\n      this.test = await _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_3__.HttpRequest.sendRequest(this.requestUrl, \"GET\", null, this.header);\n      if (this.test) {\n        // time to party!!!\n        this.#timeToParty();\n      } else {\n        throw new TypeError(this.errMessage);\n      }\n    } catch (e) {\n      if (e.message === \"jwt expired\") {\n        try {\n          const result = await _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_3__.HttpRequest.sendRequest(this.refreshRequestUrl, \"POST\", this.refBody);\n          if (result.error || !result.accessToken) {\n            throw new TypeError(this.errMessage);\n          }\n          this.header.value = result.accessToken;\n          this.accessToken = result.accessToken;\n          this.refreshToken = result.refreshToken;\n          _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.clearAccessTokens();\n          _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.setTokens(this.accessToken, this.refreshToken);\n          this.test = await _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_3__.HttpRequest.sendRequest(this.requestUrl, \"GET\", null, this.header);\n          if (this.test) {\n            // time to party!!!\n            this.#timeToParty();\n          } else {\n            throw new TypeError(this.errMessage);\n          }\n        } catch (e) {\n          console.error(e.message);\n          location.href = \"#/\";\n        }\n      } else {\n        console.error(e.message);\n        location.href = \"#/\";\n      }\n    }\n  }\n  #timeToParty() {\n    this.#testSetCaption();\n    this.#testDeployProgressBar();\n    this.#testDeployQuestion(0);\n    this.#testDeployPartyProcess();\n  }\n  #testSetCaption() {\n    let testTitle = document.querySelector(\".test-caption\");\n    testTitle.textContent = this.test.name;\n    testTitle.ariaLabel = `test ${this.test.id}`;\n  }\n  #testDeployProgressBar() {\n    let parentNode = document.querySelector(\".test-progress-bar-wrapper\");\n    parentNode.firstElementChild.dataset.ariaLabel = \"mad jun progressbar\";\n    for (let i = 0; i < this.test.questions.length; i++) {\n      let node = document.createElement(\"div\");\n      node.classList.add(\"progress-bar-item\", \"flex\", \"items-center\");\n      node.dataset.nodeIndex = `${i}`;\n      if (i === 0) {\n        node.classList.add(\"is-next\");\n      }\n      let circle = document.createElement(\"div\");\n      circle.classList.add(\"progress-bar-circle\", \"rounded-full\");\n      node.appendChild(circle);\n      if (i < this.test.questions.length - 1) {\n        let line = document.createElement(\"div\");\n        line.classList.add(\"progress-bar-line\", \"transition-400\");\n        node.appendChild(line);\n      }\n      parentNode.firstElementChild.appendChild(node);\n\n      // Question number\n      let nodeQuestion = document.createElement(\"div\");\n      nodeQuestion.classList.add(\"text-size-progress-bar\");\n      nodeQuestion.textContent = `Вопрос ${i + 1}`;\n      parentNode.lastElementChild.appendChild(nodeQuestion);\n    }\n  }\n  #testDeployQuestion(index) {\n    let currentQuestion = this.test.questions[index];\n    let title = document.querySelector('.question-title');\n    title.dataset.nodeId = `${index + 1}`;\n    title.firstElementChild.dataset.nodeId = `${currentQuestion.id}`;\n    let span = document.createElement(\"span\");\n    span.classList.add(\"text-primary\");\n    span.textContent = currentQuestion.question;\n    title.firstElementChild.textContent = `Вопрос ${index + 1}: `;\n    title.firstElementChild.appendChild(span);\n    this.#testDeployAnswers(currentQuestion.answers);\n  }\n  #testDeployAnswers(answers) {\n    let parentNode = document.querySelector(\".options-wrapper\");\n    for (let i = 0; i < answers.length; ++i) {\n      let option = answers[i];\n      let label = document.createElement(\"label\");\n      label.classList.add(\"radio-button-container\", \"text-size-medium\");\n      label.textContent = option.answer;\n      let input = document.createElement(\"input\");\n      input.classList.add(\"radio-button-input\");\n      input.type = \"radio\";\n      input.name = \"radio\";\n      input.value = `${option.id}`;\n      input.id = `answer-${i + 1}`;\n      let span = document.createElement(\"span\");\n      span.classList.add(\"radio-button-checkmark\");\n      label.appendChild(input);\n      label.appendChild(span);\n      parentNode.appendChild(label);\n    }\n  }\n  #testDeployPartyProcess() {\n    this.timerCounter.textContent = `${this.timer.seconds}`;\n    let nextButtons = document.querySelectorAll(\".app-button.next\");\n    nextButtons.forEach(button => {\n      button.dataset.nodeIndex = '1';\n      button.dataset.maxNodes = `${this.test.questions.length}`;\n      button.addEventListener(\"click\", this.#nextButtonHandler.bind(this));\n    });\n    let omitButton = document.querySelector(\".omit-question\");\n    omitButton.dataset.nodeIndex = '1';\n    omitButton.dataset.maxNodes = `${this.test.questions.length}`;\n    omitButton.addEventListener(\"click\", this.#omitButtonHandler.bind(this));\n    this.timer.timerId = setInterval(this.#timerCounter.bind(this), 1000);\n  }\n  #timerCounter() {\n    if (this.timer.seconds < 10) {\n      this.timerCounter.textContent = `0${this.timer.seconds}`;\n    } else {\n      this.timerCounter.textContent = `${this.timer.seconds}`;\n    }\n    if (--this.timer.seconds < 0) {\n      this.#testStopProcess(false);\n    }\n  }\n  async #testCheckMadJunResult() {\n    const body = {\n      userId: _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.userInfo.userId,\n      results: this.userResult\n    };\n    try {\n      let response = await _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_3__.HttpRequest.sendRequest(this.resultRequestUrl, \"POST\", body, this.header);\n      this.#redirect(response);\n    } catch (e) {\n      if (e.message === \"jwt expired\") {\n        try {\n          const r = await _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_3__.HttpRequest.sendRequest(this.refreshRequestUrl, \"POST\", this.refBody);\n          if (r.error || !r.accessToken) {\n            throw new TypeError(this.errMessage);\n          }\n          this.header.value = r.accessToken;\n          this.accessToken = r.accessToken;\n          this.refreshToken = r.refreshToken;\n          _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.clearAccessTokens();\n          _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.setTokens(this.accessToken, this.refreshToken);\n          let response2 = await _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_3__.HttpRequest.sendRequest(this.resultRequestUrl, \"POST\", body, this.header);\n          this.#redirect(response2);\n        } catch (e) {\n          console.error(e.message);\n          location.href = \"#/\";\n        }\n      } else {\n        console.error(e.message);\n        location.href = \"#/\";\n      }\n    }\n  }\n  #redirect(response) {\n    sessionStorage.setItem(\"madJunUser\", JSON.stringify({\n      score: response.score,\n      total: response.total,\n      results: this.userResult,\n      testId: this.testId\n    }));\n    location.href = \"#/result\";\n  }\n  #nextButtonHandler(e) {\n    e.preventDefault();\n    let currentIndex = parseInt(e.target.dataset.nodeIndex);\n    let maxNodes = parseInt(e.target.dataset.maxNodes);\n    if (e.target.dataset.nodeType === \"button-prev\") {\n      if (currentIndex === 1) {\n        (0,_scripts_utils_js__WEBPACK_IMPORTED_MODULE_0__.madJunSaysOops)(e.target, \"Oops... :)\");\n      } else {\n        this.#testDeployNextQuestion(currentIndex - 2);\n        this.#testRestoreOptions();\n      }\n    } else if (e.target.dataset.nodeType === \"button-next\") {\n      if (currentIndex > maxNodes) {\n        this.#testCheckMadJunResult();\n        return;\n      }\n      if (this.#isOptionChecked() && this.timer.timerId !== 0) {\n        let result = {\n          questionId: 0,\n          chosenAnswerId: 0\n        };\n        result.questionId = this.#getCurrentQuestionId();\n        result.chosenAnswerId = this.#getOptionValue();\n        this.#testSave(result);\n        let curQuestionIndex = this.#getCurrentQuestion();\n        this.#testProgressBarSetCompletedItem(curQuestionIndex);\n        if (currentIndex === maxNodes && this.#testIsCompleted()) {\n          e.target.textContent = \"Проверить\";\n          e.target.dataset.nodeIndex = `${currentIndex + 1}`;\n          // Clean up\n          this.#testStopProcess(true);\n        } else if (currentIndex === maxNodes && !this.#testIsCompleted()) {\n          (0,_scripts_utils_js__WEBPACK_IMPORTED_MODULE_0__.madJunSaysOops)(e.target, \"Oops... :)\");\n        } else if (currentIndex < maxNodes) {\n          this.#testDeployNextQuestion(curQuestionIndex + 1);\n          this.#testRestoreOptions();\n        }\n      } else {\n        (0,_scripts_utils_js__WEBPACK_IMPORTED_MODULE_0__.madJunSaysOops)(e.target, \"Oops... :)\");\n      }\n    }\n  }\n  #omitButtonHandler(e) {\n    e.preventDefault();\n    if (!this.#isOptionChecked()) {\n      let currentIndex = parseInt(e.target.dataset.nodeIndex);\n      let maxNodes = parseInt(e.target.dataset.maxNodes);\n      if (currentIndex < maxNodes) {\n        this.#testDeployNextQuestion(currentIndex);\n      } else {\n        (0,_scripts_utils_js__WEBPACK_IMPORTED_MODULE_0__.madJunSaysOops)(e.target, \"Oops... :)\");\n      }\n    } else {\n      (0,_scripts_utils_js__WEBPACK_IMPORTED_MODULE_0__.madJunSaysOops)(e.target, \"Oops... :)\");\n    }\n  }\n  #testDeployNextQuestion(index) {\n    this.#testProgressBarSetNextItem(index);\n    this.#testClearOptions();\n    this.#testDeployQuestion(index);\n    this.#testSetNextButtonsIndex(index + 1);\n    this.#testSetOmitButtonIndex(index + 1);\n  }\n  #testSetOmitButtonIndex(index) {\n    let omit = document.querySelector(\".omit-question\");\n    omit.dataset.nodeIndex = `${index}`;\n  }\n  #testSetNextButtonsIndex(index) {\n    let nextButtons = document.querySelectorAll(\".app-button.next\");\n    nextButtons[0].dataset.nodeIndex = `${index}`;\n    nextButtons[1].dataset.nodeIndex = `${index}`;\n  }\n  #testClearOptions() {\n    let options = document.querySelectorAll(\".radio-button-container\");\n    for (let i = 0; i < options.length; ++i) {\n      options[i].remove();\n    }\n  }\n  #testProgressBarSetNextItem(index) {\n    let pBar = document.querySelector(\".test-progress-bar\");\n    for (let i = 0; i < pBar.children.length; ++i) {\n      if (pBar.children[i].classList.contains(\"is-next\")) {\n        pBar.children[i].classList.remove(\"is-next\");\n      }\n    }\n    if (!pBar.children[index].classList.contains(\"is-active\")) {\n      pBar.children[index].classList.add(\"is-next\");\n    }\n  }\n  #testProgressBarSetCompletedItem(index) {\n    let pBar = document.querySelector(\".test-progress-bar\");\n    if (pBar.children[index].classList.contains(\"is-next\")) {\n      pBar.children[index].classList.remove(\"is-next\");\n      pBar.children[index].classList.add(\"is-active\");\n    }\n  }\n  #isOptionChecked() {\n    let result = false;\n    let optionsNodes = document.querySelectorAll(\".radio-button-input\");\n    for (let i = 0; i < optionsNodes.length; ++i) {\n      if (optionsNodes[i].checked) {\n        result = true;\n        break;\n      }\n    }\n    return result;\n  }\n  #getOptionValue() {\n    let value = 0;\n    let optionsNodes = document.querySelectorAll(\".radio-button-input\");\n    for (let i = 0; i < optionsNodes.length; ++i) {\n      if (optionsNodes[i].checked) {\n        value = parseInt(optionsNodes[i].value, 10);\n        break;\n      }\n    }\n    return value;\n  }\n  #testRestoreOptions() {\n    let currentQuestion = this.#getCurrentQuestionId();\n    if (this.userResult.length > 0) {\n      for (let i = 0; i < this.userResult.length; i++) {\n        if (this.userResult[i].questionId === currentQuestion) {\n          this.#testSetOption(this.userResult[i].chosenAnswerId);\n        }\n      }\n    }\n  }\n  #testSetOption(optionId) {\n    let options = document.querySelectorAll(\".radio-button-input\");\n    for (let i = 0; i < options.length; ++i) {\n      let value = parseInt(options[i].value);\n      if (value === optionId) {\n        options[i].checked = true;\n      }\n    }\n  }\n  #getCurrentQuestionId() {\n    let question = document.querySelector(\".question-title\");\n    return parseInt(question.firstElementChild.dataset.nodeId, 10);\n  }\n  #getCurrentQuestion() {\n    let question = document.querySelector(\".question-title\");\n    let value = parseInt(question.dataset.nodeId, 10);\n    --value;\n    return value;\n  }\n  #testSave(result) {\n    if (this.userResult.length === 0) {\n      this.userResult.push(result);\n    } else {\n      let ok = true;\n      for (let i = 0; i < this.userResult.length; i++) {\n        let curResult = this.userResult[i];\n        if (curResult.questionId === result.questionId) {\n          curResult.chosenAnswerId = result.chosenAnswerId;\n          ok = false;\n          break;\n        }\n      }\n      if (ok) {\n        this.userResult.push(result);\n      }\n    }\n  }\n  #testIsCompleted() {\n    let result = true;\n    let items = document.querySelectorAll(\".progress-bar-item\");\n    for (let i = 0; i < items.length; ++i) {\n      if (!items[i].classList.contains(\"is-active\")) {\n        result = false;\n        break;\n      }\n    }\n    return result;\n  }\n  #testStopProcess(bResult) {\n    clearInterval(this.timer.timerId);\n    this.timer.timerId = 0;\n    this.#testStop(bResult);\n  }\n  #testStop(bResult) {\n    this.#testHideButtons();\n    this.#testHideOptions();\n    this.#testHideQuestion();\n    if (bResult) {\n      this.#testShowSnackbar();\n    } else {\n      this.#testShowSnackbarError();\n      setTimeout(() => {\n        location.href = '#/select';\n      }, 3000);\n    }\n  }\n  #testHideButtons() {\n    let prev = document.querySelector(\".app-button.next[data-node-type='button-prev']\");\n    let omit = document.querySelector(\".omit-question\");\n    prev.style.visibility = \"hidden\";\n    omit.style.visibility = \"hidden\";\n  }\n  #testHideOptions() {\n    let options = document.querySelectorAll(\".radio-button-container\");\n    for (let i = 0; i < options.length; ++i) {\n      options[i].style.visibility = \"hidden\";\n    }\n  }\n  #testHideQuestion() {\n    let question = document.querySelector(\".question-title\");\n    question.firstElementChild.style.visibility = \"hidden\";\n  }\n  #testShowSnackbar() {\n    let snackbar = document.querySelector(\".snackbar.snackbar-question\");\n    snackbar.classList.add(\"is-active\");\n  }\n  #testShowSnackbarError() {\n    let snackbar = document.querySelector(\".snackbar.snackbar-timeout\");\n    snackbar.classList.add(\"is-active\");\n  }\n}\n\n//# sourceURL=webpack://itlogia-project-quiz/./src/modules/quiztest.js?\n}");

/***/ }),

/***/ "./src/modules/selection.js":
/*!**********************************!*\
  !*** ./src/modules/selection.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Select: () => (/* binding */ Select)\n/* harmony export */ });\n/* harmony import */ var _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../scripts/auth.js */ \"./src/scripts/auth.js\");\n/* harmony import */ var _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scripts/validation.utils.js */ \"./src/scripts/validation.utils.js\");\n/* harmony import */ var _scripts_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scripts/config.js */ \"./src/scripts/config.js\");\n\n\n\nclass Select {\n  constructor() {\n    this.requestUrl = _scripts_config_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].host + \"/tests\";\n    this.refreshRequestUrl = _scripts_config_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].host + \"/refresh\";\n    this.accessToken = _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.getAccessToken();\n    this.refreshToken = _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.getRefreshToken();\n    this.header = {\n      name: \"x-access-token\",\n      value: this.accessToken\n    };\n    this.errMessage = \"Oops, something went wrong!\";\n    this.requestTestResults = _scripts_config_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].host + \"/tests/results?userId=\" + _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.userInfo.userId;\n    sessionStorage.removeItem(\"madJunUser\");\n    this.#init();\n  }\n  async #init() {\n    let result = null;\n    try {\n      result = await _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_1__.HttpRequest.sendRequest(this.requestUrl, \"GET\", null, this.header);\n    } catch (e) {\n      console.error(e.message);\n      if (e.message === \"jwt expired\") {\n        try {\n          const r = await _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_1__.HttpRequest.sendRequest(this.refreshRequestUrl, \"POST\", {\n            refreshToken: this.refreshToken\n          });\n          if (r.error || !r.accessToken) {\n            throw new TypeError(this.errMessage);\n          }\n          this.header.value = r.accessToken;\n          this.accessToken = r.accessToken;\n          this.refreshToken = r.refreshToken;\n          _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.clearAccessTokens();\n          _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.setTokens(this.accessToken, this.refreshToken);\n          result = await _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_1__.HttpRequest.sendRequest(this.requestUrl, \"GET\", null, this.header);\n        } catch (e) {\n          console.error(e.message);\n          location.href = \"#/\";\n        }\n      } else {\n        console.error(e.message);\n        location.href = \"#/\";\n      }\n    }\n    try {\n      this.testResults = await _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_1__.HttpRequest.sendRequest(this.requestTestResults, \"GET\", null, this.header);\n    } catch (e) {\n      console.error(e.message);\n    }\n\n    // time to party!!!\n    this.#loadTests(result);\n  }\n  #eventHandler(e) {\n    e.preventDefault();\n    if (e.target.dataset.nodeType === \"test-button\") {\n      let dataId = e.target.dataset.nodeData;\n      location.href = \"#/test?id=\" + dataId;\n    }\n  }\n  #loadTests(dataTests) {\n    const parentNode = document.querySelector('.test-selection');\n    if (dataTests && dataTests.length > 0) {\n      for (const node of dataTests) {\n        this.#loadTest(parentNode, node);\n      }\n      parentNode.addEventListener('click', this.#eventHandler.bind(this));\n    }\n  }\n  #loadTest(parent, child) {\n    let {\n      id,\n      name\n    } = child;\n    let testScore = {\n      passed: \"no\",\n      score: \"0/0\"\n    };\n    if (this.testResults && this.testResults.length > 0) {\n      for (let i = 0; i < this.testResults.length; ++i) {\n        if (this.testResults[i].testId === id) {\n          testScore.passed = \"yes\";\n          testScore.score = `${this.testResults[i].score}/${this.testResults[i].total}`;\n          break;\n        }\n      }\n    }\n    let parentChildNode = document.createElement('div');\n    parentChildNode.classList.add('select-wrapper');\n    parentChildNode.dataset.nodeType = 'test';\n    parentChildNode.dataset.nodeIndex = `${id}`;\n    let testName = document.createElement('p');\n    testName.classList.add(\"text-size-small\", \"font-600\", \"transition-color-300\");\n    testName.textContent = name;\n    let testButton = document.createElement('a');\n    testButton.classList.add(\"arrow-button\");\n    testButton.href = `#`;\n    testButton.role = 'button';\n    testButton.dataset.nodeType = 'test-button';\n    testButton.dataset.nodeData = `${id}`;\n    testButton.dataset.passed = testScore.passed;\n    let img = document.createElement('img');\n    img.classList.add('svg');\n    img.src = './assets/img/arrow-right-thin.svg';\n    img.loading = 'lazy';\n    img.alt = \"\";\n    testButton.appendChild(img);\n    let userTestResult = document.createElement(\"div\");\n    userTestResult.classList.add('user-test-result', 'text-accent', 'text-size-tiny');\n    let resultDiv = document.createElement(\"div\");\n    resultDiv.textContent = \"Результат\";\n    let scoreDiv = document.createElement(\"div\");\n    scoreDiv.textContent = testScore.score;\n    userTestResult.appendChild(resultDiv);\n    userTestResult.appendChild(scoreDiv);\n    testButton.appendChild(userTestResult);\n    parentChildNode.appendChild(testName);\n    parentChildNode.appendChild(testButton);\n    parent.appendChild(parentChildNode);\n  }\n}\n\n//# sourceURL=webpack://itlogia-project-quiz/./src/modules/selection.js?\n}");

/***/ }),

/***/ "./src/modules/validation.js":
/*!***********************************!*\
  !*** ./src/modules/validation.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FormValidation: () => (/* binding */ FormValidation)\n/* harmony export */ });\n/* harmony import */ var _scripts_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../scripts/utils.js */ \"./src/scripts/utils.js\");\n/* harmony import */ var _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scripts/validation.utils.js */ \"./src/scripts/validation.utils.js\");\n/* harmony import */ var _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scripts/auth.js */ \"./src/scripts/auth.js\");\n/* harmony import */ var _scripts_config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../scripts/config.js */ \"./src/scripts/config.js\");\n\n\n\n\nclass FormValidation {\n  constructor(form) {\n    this.emailRegExp = /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/;\n    this.nameRegExp = /^[A-Z][a-zA-Z]+\\s*$/;\n    this.passwordRegExp = /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/;\n    this.valid = false;\n    this.form = document.querySelector(form);\n    this.loginUrl = _scripts_config_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].host + \"/login\";\n    this.signupUrl = _scripts_config_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].host + \"/signup\";\n    if (this.form) {\n      this.inputs = this.form.querySelectorAll('input');\n    }\n    if (this.inputs) {\n      for (let i = 0; i < this.inputs.length; i++) {\n        const input = this.inputs[i];\n        if (input.type === 'checkbox') {\n          input.addEventListener(\"click\", this.#handleCheckbox.bind(this));\n          continue;\n        }\n        input.addEventListener(\"input\", this.#handleInput.bind(this));\n      }\n      this.form.addEventListener(\"submit\", this.#handleValidate.bind(this));\n    }\n  }\n  #handleValidate(event) {\n    event.preventDefault();\n    if (this.form.checkValidity() && this.valid) {\n      let user = {\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        password: \"\"\n      };\n      for (let i = 0; i < this.inputs.length; i++) {\n        const input = this.inputs[i];\n        if (input.name === 'firstname') {\n          user.firstname = input.value.trim();\n        }\n        if (input.name === 'lastname') {\n          user.lastname = input.value.trim();\n        }\n        if (input.type === 'email') {\n          user.email = input.value.trim();\n        }\n        if (input.type === 'password') {\n          user.password = input.value.trim();\n        }\n      }\n      this.form.reset();\n      if (user.firstname.length > 0) {\n        //Signup\n        this.#requestSignup(user);\n      } else {\n        //Login\n        this.#requestLogin(user);\n      }\n    }\n  }\n  async #requestSignup(user) {\n    try {\n      const body = {\n        name: user.firstname,\n        lastName: user.lastname,\n        email: user.email,\n        password: user.password\n      };\n      const result = await _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_1__.HttpRequest.sendRequest(this.signupUrl, \"POST\", body);\n      if (result.error || !result.user) {\n        throw new TypeError(result.message);\n      }\n      //Time to Party\n      location.href = \"#/login\";\n    } catch (error) {\n      this.#setErrorMessage(error.message);\n    }\n  }\n  async #requestLogin(user) {\n    try {\n      const body = {\n        email: user.email,\n        password: user.password\n      };\n      const result = await _scripts_validation_utils_js__WEBPACK_IMPORTED_MODULE_1__.HttpRequest.sendRequest(this.loginUrl, \"POST\", body);\n      if (result.error || !result.accessToken || !result.refreshToken || !result.fullName) {\n        throw new TypeError(result.message);\n      }\n      //Time to Party\n      _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.setTokens(result.accessToken, result.refreshToken);\n      _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.userInfo.name = result.fullName.split(\" \")[0];\n      _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.userInfo.lastName = result.fullName.split(\" \")[1];\n      _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.userInfo.email = user.email;\n      _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.userInfo.userId = result.userId;\n      localStorage.setItem(\"madJunUserInfo\", JSON.stringify({\n        name: _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.userInfo.name,\n        lastName: _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.userInfo.lastName,\n        email: _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.userInfo.email,\n        userId: _scripts_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.userInfo.userId\n      }));\n      location.href = \"#/select\";\n    } catch (error) {\n      this.#setErrorMessage(error.message);\n    }\n  }\n  #setErrorMessage(message) {\n    const btn = document.querySelector(\"button[type='submit']\");\n    (0,_scripts_utils_js__WEBPACK_IMPORTED_MODULE_0__.madJunSaysOops)(btn, message);\n  }\n  #handleInput(event) {\n    switch (event.target.name) {\n      case 'firstname':\n        this.#handleInputName(event.target);\n        break;\n      case 'lastname':\n        this.#handleInputName(event.target);\n        break;\n      case 'email':\n        this.#handleInputUserEmail(event.target);\n        break;\n      case 'password':\n        this.#handleInputUserPassword(event.target);\n        break;\n    }\n  }\n  #isValidName(name) {\n    return name.value.length > 1 && this.nameRegExp.test(name.value);\n  }\n  #handleInputName(target) {\n    this.valid = this.#isValidName(target);\n    if (this.valid) {\n      target.nextElementSibling.nextElementSibling.textContent = '';\n      target.setCustomValidity('');\n    } else {\n      if (target.value.length < 2) {\n        target.nextElementSibling.nextElementSibling.textContent = 'Name must be at least 2 characters long';\n      } else {\n        target.nextElementSibling.nextElementSibling.textContent = 'First letter is capital';\n        target.setCustomValidity('invalid');\n      }\n    }\n  }\n  #handleInputUserEmail(target) {\n    this.valid = this.#isValidEmail(target);\n    if (this.valid) {\n      target.nextElementSibling.nextElementSibling.textContent = '';\n      target.setCustomValidity('');\n    } else {\n      target.nextElementSibling.nextElementSibling.textContent = 'Please enter a valid email address';\n      target.setCustomValidity('invalid');\n    }\n  }\n  #isValidEmail(target) {\n    return target.value.length > 6 && this.emailRegExp.test(target.value);\n  }\n  #handleInputUserPassword(target) {\n    this.valid = this.#isValidPassword(target);\n    if (this.valid) {\n      target.nextElementSibling.nextElementSibling.textContent = '';\n      target.setCustomValidity('');\n    } else {\n      if (target.value.length < 6) {\n        target.nextElementSibling.nextElementSibling.textContent = 'Minimum 6 characters long';\n      } else {\n        target.nextElementSibling.nextElementSibling.textContent = 'Password must have uppercase and lowercase letters, digits and at least one special symbol';\n        target.setCustomValidity('invalid');\n      }\n    }\n  }\n  #isValidPassword(target) {\n    return target.value.length > 5 && this.passwordRegExp.test(target.value);\n  }\n  #handleCheckbox(e) {\n    this.valid = e.target.checked;\n    if (this.valid) {\n      e.target.parentElement.nextElementSibling.textContent = '';\n      e.target.setCustomValidity('');\n    } else {\n      e.target.parentElement.nextElementSibling.textContent = 'Please check the box';\n      e.target.setCustomValidity('invalid');\n    }\n  }\n}\n\n//# sourceURL=webpack://itlogia-project-quiz/./src/modules/validation.js?\n}");

/***/ }),

/***/ "./src/modules/viewanswers.js":
/*!************************************!*\
  !*** ./src/modules/viewanswers.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ViewAnswer: () => (/* binding */ ViewAnswer)\n/* harmony export */ });\n/* harmony import */ var _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../scripts/auth.js */ \"./src/scripts/auth.js\");\n/* harmony import */ var _scripts_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scripts/config.js */ \"./src/scripts/config.js\");\n/* harmony import */ var _scripts_validation_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scripts/validation.utils */ \"./src/scripts/validation.utils.js\");\n\n\n\nclass ViewAnswer {\n  constructor() {\n    this.refreshRequestUrl = _scripts_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + \"/refresh\";\n    this.accessToken = _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.getAccessToken();\n    this.refreshToken = _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.getRefreshToken();\n    this.header = {\n      name: \"x-access-token\",\n      value: this.accessToken\n    };\n    this.refBody = {\n      refreshToken: this.refreshToken\n    };\n    this.errMessage = \"Oops, something went wrong!\";\n    this.testResponse = null;\n    this.test = null;\n    this.userData = [];\n    let storage = sessionStorage.getItem(\"madJunUser\");\n    if (storage) {\n      this.userData = JSON.parse(storage);\n      this.resultRequestUrl = _scripts_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + \"/tests/\" + this.userData.testId + \"/result/details?userId=\" + _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.userInfo.userId;\n      //console.log(this.userData.results);\n      this.#init();\n    } else {\n      location.href = \"#/\";\n    }\n  }\n  async #init() {\n    try {\n      this.testResponse = await _scripts_validation_utils__WEBPACK_IMPORTED_MODULE_2__.HttpRequest.sendRequest(this.resultRequestUrl, \"GET\", null, this.header);\n      if (this.testResponse) {\n        this.test = this.testResponse.test;\n        this.#loadAnswers();\n      } else {\n        throw new TypeError(this.errMessage);\n      }\n    } catch (e) {\n      if (e.message === \"jwt expired\") {\n        try {\n          const result = await _scripts_validation_utils__WEBPACK_IMPORTED_MODULE_2__.HttpRequest.sendRequest(this.refreshRequestUrl, \"POST\", this.refBody);\n          if (result.error || !result.accessToken) {\n            throw new TypeError(this.errMessage);\n          }\n          this.header.value = result.accessToken;\n          this.accessToken = result.accessToken;\n          this.refreshToken = result.refreshToken;\n          _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.clearAccessTokens();\n          _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.setTokens(this.accessToken, this.refreshToken);\n          this.testResponse = await _scripts_validation_utils__WEBPACK_IMPORTED_MODULE_2__.HttpRequest.sendRequest(this.resultRequestUrl, \"GET\", null, this.header);\n          if (this.testResponse) {\n            this.test = this.testResponse.test;\n            this.#loadAnswers();\n          } else {\n            throw new TypeError(this.errMessage);\n          }\n        } catch (e) {\n          console.error(e.message);\n          location.href = \"#/\";\n        }\n      } else {\n        console.log(e.message);\n        location.href = \"#/\";\n      }\n    }\n  }\n  #backToResult(e) {\n    e.preventDefault();\n    location.href = \"#/result\";\n  }\n  #loadAnswers() {\n    document.querySelector('.view-test-name').textContent = this.test.name;\n    document.querySelector('.mad-jun-user-info').textContent = _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.userInfo.name + \" \" + _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.userInfo.lastName + \", \" + _scripts_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.userInfo.email;\n    document.querySelector('.back-to-result').addEventListener('click', this.#backToResult.bind(this));\n    this.#deployAnswers();\n  }\n  #deployAnswers() {\n    let parentNode = document.querySelector('.answers-wrapper');\n    for (let i = 0; i < this.test.questions.length; i++) {\n      this.#deployAnswer(parentNode, this.test.questions[i], i + 1);\n    }\n  }\n  #deployAnswer(parentNode, question, questionNumber) {\n    let answerItem = document.createElement(\"div\");\n    answerItem.classList.add(\"view-answer-item\");\n\n    //Question text\n    let div = document.createElement(\"div\");\n    let h3 = document.createElement(\"h3\");\n    h3.classList.add(\"h3\", \"text-accent\");\n    h3.textContent = `Вопрос ${questionNumber}: `;\n    let span = document.createElement(\"span\");\n    span.classList.add(\"text-primary\");\n    span.textContent = question.question;\n    h3.appendChild(span);\n    div.appendChild(h3);\n    answerItem.appendChild(div);\n\n    //Answer List\n    let answerList = document.createElement(\"div\");\n    answerList.classList.add(\"answers-list\");\n    for (let i = 0; i < question.answers.length; ++i) {\n      let answerOption = document.createElement(\"div\");\n      answerOption.classList.add(\"answer-option\");\n      let answerIcon = document.createElement(\"div\");\n      answerIcon.classList.add(\"answer-option-icon\");\n      let text = document.createElement(\"div\");\n      text.classList.add(\"text-size-medium\");\n      text.textContent = question.answers[i].answer;\n      let userAnswerId = this.#getUserAnswerId(question.id);\n      if (userAnswerId === question.answers[i].id) {\n        if (question.answers[i].correct) {\n          answerOption.classList.add(\"valid\");\n          answerIcon.classList.add(\"valid\");\n        } else {\n          answerOption.classList.add(\"invalid\");\n          answerIcon.classList.add(\"invalid\");\n        }\n      }\n      answerOption.appendChild(answerIcon);\n      answerOption.appendChild(text);\n      answerList.appendChild(answerOption);\n    }\n    answerItem.appendChild(answerList);\n    parentNode.appendChild(answerItem);\n  }\n  #getUserAnswerId(questionId) {\n    let answer = this.userData.results.find(element => element.questionId === questionId);\n    if (answer) {\n      return answer.chosenAnswerId;\n    }\n    return null;\n  }\n}\n\n//# sourceURL=webpack://itlogia-project-quiz/./src/modules/viewanswers.js?\n}");

/***/ }),

/***/ "./src/router.js":
/*!***********************!*\
  !*** ./src/router.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Router: () => (/* binding */ Router)\n/* harmony export */ });\n/* harmony import */ var _modules_validation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/validation.js */ \"./src/modules/validation.js\");\n/* harmony import */ var _modules_selection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules/selection.js */ \"./src/modules/selection.js\");\n/* harmony import */ var _modules_quiztest_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modules/quiztest.js */ \"./src/modules/quiztest.js\");\n/* harmony import */ var _modules_quizresult_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./modules/quizresult.js */ \"./src/modules/quizresult.js\");\n/* harmony import */ var _modules_viewanswers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./modules/viewanswers.js */ \"./src/modules/viewanswers.js\");\n/* harmony import */ var _scripts_auth_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./scripts/auth.js */ \"./src/scripts/auth.js\");\n\n\n\n\n\n\nclass Router {\n  constructor() {\n    this.logo = null;\n    this.logout = null;\n    this.routes = [{\n      route: '#/',\n      pageTitle: 'Itlogia Quiz',\n      template: './templates/index.html',\n      load: () => {}\n    }, {\n      route: '#/signup',\n      pageTitle: 'Sign Up',\n      template: './templates/signup.html',\n      load: () => {\n        new _modules_validation_js__WEBPACK_IMPORTED_MODULE_0__.FormValidation('#form');\n      }\n    }, {\n      route: '#/login',\n      pageTitle: 'Login',\n      template: './templates/login.html',\n      load: () => {\n        new _modules_validation_js__WEBPACK_IMPORTED_MODULE_0__.FormValidation('#form');\n      }\n    }, {\n      route: '#/select',\n      pageTitle: 'Test Select',\n      template: './templates/select.html',\n      load: () => {\n        new _modules_selection_js__WEBPACK_IMPORTED_MODULE_1__.Select();\n      }\n    }, {\n      route: '#/test',\n      pageTitle: 'Test',\n      template: './templates/test.html',\n      load: () => {\n        new _modules_quiztest_js__WEBPACK_IMPORTED_MODULE_2__.QuizTest();\n      }\n    }, {\n      route: '#/result',\n      pageTitle: 'Result',\n      template: './templates/result.html',\n      load: () => {\n        new _modules_quizresult_js__WEBPACK_IMPORTED_MODULE_3__.QuizResult();\n      }\n    }, {\n      route: '#/view',\n      pageTitle: 'Answers',\n      template: './templates/view.html',\n      load: () => {\n        new _modules_viewanswers_js__WEBPACK_IMPORTED_MODULE_4__.ViewAnswer();\n      }\n    }, {\n      route: '#/logout',\n      pageTitle: \"\",\n      template: \"\",\n      load: () => {\n        _scripts_auth_js__WEBPACK_IMPORTED_MODULE_5__.Auth.logoutManager();\n      }\n    }];\n  }\n  controller(route) {\n    if (this.logo === null) {\n      this.logo = document.querySelector(\"a.logo\");\n    }\n    if (this.logout === null) {\n      this.logout = document.querySelector(\"#logout-link\");\n    }\n    switch (route.route) {\n      case '#/test':\n        this.logo.addEventListener('click', this.#preventDefault, false);\n        this.logout.addEventListener('click', this.#preventDefault, false);\n        break;\n      default:\n        this.logo.removeEventListener('click', this.#preventDefault, false);\n        this.logout.removeEventListener('click', this.#preventDefault, false);\n    }\n  }\n  async openRoute() {\n    const route = this.routes.find(routeItem => {\n      return routeItem.route === window.location.hash.split('?')[0];\n    });\n    if (!route) {\n      location.href = '#/';\n    } else if (_scripts_auth_js__WEBPACK_IMPORTED_MODULE_5__.Auth.accountManager(route)) {\n      document.querySelector(\".main-content-wrapper\").innerHTML = await fetch(route.template).then(response => response.text());\n      document.querySelector(\"#page-title\").textContent = route.pageTitle;\n      this.controller(route);\n      route.load();\n    }\n  }\n  #preventDefault(e) {\n    e.preventDefault();\n  }\n}\n\n//# sourceURL=webpack://itlogia-project-quiz/./src/router.js?\n}");

/***/ }),

/***/ "./src/scripts/auth.js":
/*!*****************************!*\
  !*** ./src/scripts/auth.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Auth: () => (/* binding */ Auth)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config.js */ \"./src/scripts/config.js\");\n/* harmony import */ var _validation_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./validation.utils */ \"./src/scripts/validation.utils.js\");\n\n\nclass Auth {\n  static accessTokenKey = 'accessToken';\n  static refreshTokenKey = 'refreshToken';\n  static userInfo = {\n    name: '',\n    lastName: '',\n    email: '',\n    userId: 0\n  };\n  static setTokens(accessToken, refreshToken) {\n    localStorage.setItem(this.accessTokenKey, accessToken);\n    localStorage.setItem(this.refreshTokenKey, refreshToken);\n  }\n  static getAccessToken() {\n    return localStorage.getItem(this.accessTokenKey);\n  }\n  static getRefreshToken() {\n    return localStorage.getItem(this.refreshTokenKey);\n  }\n  static clearAccessTokens() {\n    localStorage.removeItem(this.accessTokenKey);\n    localStorage.removeItem(this.refreshTokenKey);\n  }\n  static accountManager(route) {\n    const userAccount = document.querySelector(\".user-account-wrapper\");\n    const userInfo = document.querySelector(\".user-name\");\n    const accessToken = this.getAccessToken();\n    let result = false;\n    if (route) {\n      if (accessToken) {\n        userAccount.dataset.accountState = \"login\";\n        let madJunInfo = localStorage.getItem(\"madJunUserInfo\");\n        if (madJunInfo) {\n          let user = JSON.parse(madJunInfo);\n          this.userInfo.name = user.name;\n          this.userInfo.lastName = user.lastName;\n          this.userInfo.email = user.email;\n          this.userInfo.userId = user.userId;\n          userInfo.textContent = Auth.userInfo.name + \" \" + Auth.userInfo.lastName;\n        }\n        if (route.route === '#/signup' || route.route === '#/login') {\n          location.href = \"#/select\";\n        } else if (route.route === '#/logout') {\n          route.load();\n        } else {\n          result = true;\n        }\n      } else {\n        userAccount.dataset.accountState = \"logout\";\n        result = true;\n      }\n    }\n    return result;\n  }\n  static logoutManager() {\n    const token = this.getRefreshToken();\n    if (token) {\n      const body = {\n        refreshToken: token\n      };\n      try {\n        const r = this.sendLogoutRequest(_config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].host + \"/logout\", body);\n        if (!r.error) {\n          this.clearAccessTokens();\n          localStorage.removeItem(\"madJunUserInfo\");\n          this.userInfo.name = \"\";\n          this.userInfo.lastName = \"\";\n          this.userInfo.email = \"\";\n          this.userInfo.userId = 0;\n          location.href = \"#/\";\n        }\n      } catch (e) {\n        location.href = \"#/\";\n      }\n    }\n  }\n  static async sendLogoutRequest(url, body) {\n    return await _validation_utils__WEBPACK_IMPORTED_MODULE_1__.HttpRequest.sendRequest(url, \"POST\", body);\n  }\n}\n\n//# sourceURL=webpack://itlogia-project-quiz/./src/scripts/auth.js?\n}");

/***/ }),

/***/ "./src/scripts/config.js":
/*!*******************************!*\
  !*** ./src/scripts/config.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  host: \"http://localhost:3000/api\"\n});\n\n//# sourceURL=webpack://itlogia-project-quiz/./src/scripts/config.js?\n}");

/***/ }),

/***/ "./src/scripts/utils.js":
/*!******************************!*\
  !*** ./src/scripts/utils.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkUser: () => (/* binding */ checkUser),\n/* harmony export */   getLocationParam: () => (/* binding */ getLocationParam),\n/* harmony export */   madJunSaysOops: () => (/* binding */ madJunSaysOops),\n/* harmony export */   queryUrlparams: () => (/* binding */ queryUrlparams)\n/* harmony export */ });\nfunction checkUser() {\n  \"use strict\";\n\n  let params = queryUrlparams();\n  return !!params.firstname || !!params.lastName || !!params.email;\n}\nfunction queryUrlparams() {\n  const queryParams = document.location.hash.split('+').join(' ');\n  let params = {},\n    tokens,\n    regExp = /[?&]([^=]+)=([^&]*)/g;\n  while (tokens = regExp.exec(queryParams)) {\n    params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n  }\n  return params;\n}\nfunction getLocationParam(paramName) {\n  \"use strict\";\n\n  let params = new URLSearchParams(document.location.search);\n  return params.get(paramName);\n}\nfunction madJunSaysOops(sibling, oops) {\n  \"use strict\";\n\n  sibling.nextElementSibling.textContent = oops;\n  sibling.nextElementSibling.classList.toggle(\"is-active\");\n  setTimeout(() => {\n    sibling.nextElementSibling.classList.toggle(\"is-active\");\n  }, 2000);\n}\n\n\n//# sourceURL=webpack://itlogia-project-quiz/./src/scripts/utils.js?\n}");

/***/ }),

/***/ "./src/scripts/validation.utils.js":
/*!*****************************************!*\
  !*** ./src/scripts/validation.utils.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HttpRequest: () => (/* binding */ HttpRequest)\n/* harmony export */ });\nclass HttpRequest {\n  static async sendRequest(url, method = \"GET\", body = null, header = null) {\n    const defHeaders = new Headers();\n    defHeaders.append(\"Content-Type\", \"application/json; charset=UTF-8\");\n    defHeaders.append(\"Accept\", \"application/json\");\n    if (header) {\n      defHeaders.append(header.name, header.value);\n    }\n    const params = {\n      method: method,\n      headers: defHeaders\n    };\n    if (body) {\n      params.body = JSON.stringify(body);\n    }\n    const request = new Request(url, params);\n    const response = await fetch(request);\n    const json = await response.json();\n    if (response.status < 200 || response.status >= 300 && response.status < 400) {\n      throw new TypeError(`Error, Response status: ${response.status}`);\n    }\n    if (response.status >= 400 && response.status < 500) {\n      throw new TypeError(json.message);\n    }\n    const contentType = response.headers.get(\"Content-Type\");\n    if (!contentType || !contentType.includes(\"application/json\")) {\n      throw new TypeError(\"Oops, we haven't got JSON!\");\n    }\n    return json; //await response.json();\n  }\n}\n\n//# sourceURL=webpack://itlogia-project-quiz/./src/scripts/validation.utils.js?\n}");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/app.js");
/******/ 	
/******/ })()
;